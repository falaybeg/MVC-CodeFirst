@model IEnumerable<EntityFrameworkExample.Models.Supplier>

@{
    ViewBag.Title = "ListSupplier";
}

<center>
    <h2 style="background-color: dimgray; color:white">Supplier List</h2>
</center><hr />

<a href="@Url.Action("AddSupplier","Supplier")" class="btn btn-success" > <i class="glyphicon glyphicon-plus"></i>
<span><b>New Supplier</b></span></a>
<br />
<table class="table table-hover table-bordered">

    <thead style="background-color:lightgray; font-size:15px">
        <tr>
        <th style="width: 200px"><label>Supplier Name</label></th>
            <th>Address</th>
            <th><label>Phone</label></th>
            <th><label>City</label></th>
            <th></th>
        </tr>
    </thead>
    
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>@item.Name</td>
                <td>@item.Address</td>
                <td>@item.Phone</td>
                <td>@item.City.Name</td>
                <td style="width:180px">
                    <a href="@Url.Action()" class="btn btn-warning"><i class="glyphicon glyphicon-edit">
                           </i><span>&nbsp;&nbsp;&nbsp;Edit</span></a>
                    @*<a href="@Url.Action()" class="btn btn-danger">
                        <i class="glyphicon glyphicon-trash">
                        </i><span> Delete</span>
                    </a>*@
                    <button class="btn btn-danger" id="delete" data-toggle="modal" data-target="#deleteModal" >Delete</button>
                    <button class="btn btn-warning" id="edit" data-toggle="modal" data-target="#editModal">Edit</button>
                </td>
            </tr>

        }
    </tbody>
</table>

<div class="modal fade" id="editModal" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title"><b>Edit Supplier</b></h4>
            </div>

            <div class="modal-body">
                <p>Some text in the modal.</p>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-success" data-dismiss="modal"><b>Save Changes</b></button>
                <button type="button" class="btn btn-default" data-dismiss="modal"><b>Close</b></button>
            </div>
        </div>

    </div>
</div>


<div class="modal fade" id="deleteModal" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title"><b>Delete Supplier</b></h4>
            </div>
            
            <div class="modal-footer" id="deleteForm">
                <label style="float:left; font-size: 16px">Are you sure you want to delete this item?</label>
                <br />
                <button type="button" class="btn btn-default" data-dismiss="modal"><b>Cancel</b></button>
                <button type="button" class="btn btn-danger" id="deletebtn"><b>Delete</b></button>
            </div>
        </div>
    </div>
    <script>
        $(document).ready(function () {

            $("#deletebtn").click(function () {

                var deleteForm = $("#deleteForm").serialize();

                $.ajax({
                    type: "POST",
                    url: "/Supplier/DeleteSupplier",
                    data: deleteForm,
                    success: function () {
                        $("#deleteModal").modal("hide");
                    }
                });
            });
        });
    </script>
</div>

